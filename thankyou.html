<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome to Thrivoy!</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div id="loading">Loading your dashboard...</div>
        <div id="dashboard" style="display:none;">
            <!-- Dashboard content will be loaded here -->
        </div>
    </div>
    
    <script>
        const API_URL = 'https://script.google.com/macros/s/AKfycby4X4UD4luxxCizUjd_x5RPLGyOhfehBVkxqpe8hnjqcPNN-Rmzsz41ed5pj35Cktfq/exec'; // Replace with your actual URL
        
        async function loadDashboard() {
            const urlParams = new URLSearchParams(window.location.search);
            const businessId = urlParams.get('businessId');
            
            if (!businessId) {
                document.getElementById('loading').innerHTML = '‚ùå No business ID provided';
                return;
            }
            
            try {
                const response = await fetch(`${API_URL}?action=getThankYou&businessId=${businessId}`);
                const result = await response.json();
                
                if (result.success) {
                    const dashboard = document.getElementById('dashboard');
                    dashboard.innerHTML = `
                        <header>
                            <h1>üéâ Welcome, ${result.business.businessName}!</h1>
                            <p>Your website is live and ready!</p>
                        </header>
                        
                        <div class="dashboard-grid">
                            <div class="card">
                                <h3>üåê Your Website</h3>
                                <p><a href="${result.websiteUrl}" target="_blank">${result.websiteUrl}</a></p>
                                <small>May take 1-3 minutes to go live</small>
                            </div>
                            
                            <div class="card">
                                <h3>üìä Business Details</h3>
                                <p><strong>Owner:</strong> ${result.business.ownerName}</p>
                                <p><strong>Location:</strong> ${result.business.location}</p>
                                <p><strong>Category:</strong> ${result.business.category}</p>
                            </div>
                            
                            ${result.invoice ? `
                            <div class="card payment-card">
                                <h3>üí≥ Complete Your Setup</h3>
                                <p>Monthly subscription: ‚Çπ499</p>
                                <p>7-day free trial active</p>
                                ${result.invoice.upiDeepLink ? `<a href="${result.invoice.upiDeepLink}" class="btn">Pay Now</a>` : ''}
                            </div>
                            ` : ''}
                            
                            <div class="card">
                                <h3>üìß Next Steps</h3>
                                <ul>
                                    <li>Check your email for detailed instructions</li>
                                    <li>Share your website link</li>
                                    <li>Contact support if needed</li>
                                </ul>
                            </div>
                        </div>
                    `;
                    
                    document.getElementById('loading').style.display = 'none';
                    dashboard.style.display = 'block';
                } else {
                    document.getElementById('loading').innerHTML = '‚ùå ' + result.error;
                }
            } catch (error) {
                document.getElementById('loading').innerHTML = '‚ùå Failed to load dashboard: ' + error.message;
            }
        }
        
        loadDashboard();
    </script>
</body>
</html>
